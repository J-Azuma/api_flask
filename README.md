# 基本設計

## 設計手法
- ドメイン駆動設計(仮)を用いる

## ディレクトリ構成

1. アプリケーション層
2. ドメイン層
3. インフラ層

### 1. アプリケーション層

〇 責務
- 入力値の受付け・チェック
- ドメイン層に記述されたロジックの呼び出し
- レスポンスの整形・返却

#### **Viewクラス**

- 責務
  - リクエストの受付
  - 入力値の受け取り・チェック・整形
  - アプリケーションサービスの呼び出し
  - レスポンスの返却

- 責務としないこと
  - ドメインルール
  - ビジネスルールに基づくバリデーション

#### **ApplicationServiceクラス**

- 責務
  - ユースケースを実現する
  - ドメイン層のビジネスロジックを呼び出す

- 責務としないこと
  - ドメインルール

### 2. ドメイン層

〇 責務
- ドメインルールの記述
- オブジェクトの管理
- ビジネスロジックの記述
- インフラ層の呼び出し

#### **Modelクラス**

- 責務
  - ドメインオブジェクト
  - オブジェクトを操作するロジック
  - オブジェクト生成

※ 現状の実装ではModelクラスがDBのテーブル構造(インフラ層の関心事)を知ってしまっているが...

#### **DomeinServiceクラス**

- 責務
  - ドメインオブジェクトに持たせると不自然になる振る舞い(例：口座引き落としと振込)
    - 複数集約間で整合性を担保する
    - 複数インスタンスを扱う
    - 外部サービスとの連携

- 注意事項
  - ドメイン貧血症にならないように気を付ける(ドメインオブジェクトに十分な振る舞いが定義されていない状態)

#### **ValueObjectsクラス**

- 責務
  - 業務で使用する値の型をクラスとして定義する

### 3. インフラ層

〇 責務
  - データの永続化

#### **Repositoryクラス**

- 責務
  - データベースとのアクセス

